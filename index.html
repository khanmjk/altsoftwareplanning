<!DOCTYPE html>
<html>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
<link href="https://unpkg.com/tabulator-tables@5.5.2/dist/css/tabulator.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
<link href="https://unpkg.com/tabulator-tables@5.5.2/dist/css/tabulator_simple.min.css" rel="stylesheet">
<link rel="stylesheet" href="css/0-settings/variables.css">
<link rel="stylesheet" href="css/style.css">
<link rel="stylesheet" href="css/layout/main-layout.css">
<link rel="stylesheet" href="css/layout/workspace-shell.css">
<link rel="stylesheet" href="css/layout/sidebar.css">
<link rel="stylesheet" href="css/components/sidebar-enhanced.css">
<link rel="stylesheet" href="css/components/header.css">
<link rel="stylesheet" href="css/components/pill-navigation.css">
<link rel="stylesheet" href="css/components/enhancedTableWidget.css">
<link rel="stylesheet" href="css/components/aiChatPanel.css">
<link rel="stylesheet" href="css/components/ganttChart.css">
<link rel="stylesheet" href="css/components/workspace.css">

<!-- <link rel="stylesheet" href="css/components/management.css"> -->
<link rel="stylesheet" href="css/components/roadmapModal.css">
<link rel="stylesheet" href="css/ai-chat.css">
<link rel="stylesheet" href="css/views/welcome-view.css">
<link rel="stylesheet" href="css/views/visualizations-view.css">
<link rel="stylesheet" href="css/views/dashboard-view.css">
<link rel="stylesheet" href="css/views/system-edit-view.css">
<link rel="stylesheet" href="css/views/roadmap-view.css">
<link rel="stylesheet" href="css/components/service-edit-component.css">
<link rel="stylesheet" href="css/components/team-edit-component.css?v=1">
<link rel="stylesheet" href="css/components/theme-edit-component.css?v=1">
<link rel="stylesheet" href="css/components/initiative-edit-component.css?v=1">
<link rel="stylesheet" href="css/components/goal-edit-component.css?v=1">
<link rel="stylesheet" href="css/components/shared-inline-edit.css?v=1">
<link rel="stylesheet" href="css/views/roadmap-view.css">
<link rel="stylesheet" href="css/views/gantt-planning-view.css">
<link rel="stylesheet" href="css/views/accomplishments-view.css">
<link rel="stylesheet" href="css/views/goals-view.css">
<link rel="stylesheet" href="css/views/roadmap-table-view.css">
<link rel="stylesheet" href="css/views/capacity-tuning-view.css">
<link rel="stylesheet" href="css/views/capacity-planning-view.css">
<link rel="stylesheet" href="css/views/resource-forecast-view.css">
<link rel="stylesheet" href="css/views/visualizations-view.css">
<link rel="stylesheet" href="css/components/systems-view.css">
<link rel="stylesheet" href="css/components/settings-view.css?v=2">
<link rel="stylesheet" href="css/views/management-view.css?v=2">
<link rel="stylesheet" href="css/views/documentation-view.css">
<link rel="stylesheet" href="css/components/Modal.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/frappe-gantt@0.6.1/dist/frappe-gantt.css">



<meta charset="UTF-8">
</head>

<body>
    <div id="app-container">
        <!-- Sidebar -->
        <div id="sidebar">
            <div class="logo-area sidebar__logo-area" id="app-title">
                <i class="fas fa-layer-group logo-icon"></i>
                SMT Platform
            </div>
            <div class="system-switcher-container">
                <div class="system-switcher-btn" data-toggle="dropdown" data-target="system-dropdown">
                    <div class="sidebar__system-switcher-content">
                        <div class="sidebar__system-icon">
                            S</div>
                        <div class="system-name-display sidebar__system-name">My System</div>
                    </div>
                    <i class="fas fa-chevron-down sidebar__chevron-icon"></i>
                </div>
                <div id="system-dropdown" class="dropdown-menu">
                    <div class="dropdown-item"
                        onclick="if(window.navigationManager) window.navigationManager.navigateTo('systemsView')">
                        <i class="fas fa-folder-open sidebar__menu-icon"></i> Load System
                    </div>
                    <div class="dropdown-item" onclick="if(window.createNewSystem) window.createNewSystem()">
                        <i class="fas fa-plus-circle sidebar__menu-icon"></i> New System
                    </div>
                    <div class="sidebar__menu-separator"></div>
                    <div class="dropdown-item" onclick="if(window.returnToHome) window.returnToHome()">
                        <i class="fas fa-times-circle sidebar__menu-icon"></i> Close System
                    </div>
                </div>
            </div>

            <div class="nav-groups">
                <div class="nav-group-title">System</div>
                <a href="#" class="nav-item" data-view="visualizationCarousel">
                    <div class="nav-icon"><i class="fas fa-sitemap"></i></div>
                    <div class="nav-text">System Overview</div>
                </a>
                <a href="#" class="nav-item" data-view="organogramView">
                    <div class="nav-icon"><i class="fas fa-users"></i></div>
                    <div class="nav-text">Org Design</div>
                </a>
                <a href="#" class="nav-item" data-view="systemEditForm">
                    <div class="nav-icon"><i class="fas fa-cog"></i></div>
                    <div class="nav-text">Edit System</div>
                </a>

                <div class="nav-group-title">Product</div>
                <a href="#" class="nav-item" data-view="roadmapView">
                    <div class="nav-icon"><i class="fas fa-map"></i></div>
                    <div class="nav-text">Roadmap & Backlog</div>
                </a>
                <a href="#" class="nav-item" data-view="managementView">
                    <div class="nav-icon"><i class="fas fa-tasks"></i></div>
                    <div class="nav-text">Management</div>
                </a>

                <div class="nav-group-title">Planning</div>
                <a href="#" class="nav-item" data-view="planningView">
                    <div class="nav-icon"><i class="far fa-calendar-alt"></i></div>
                    <div class="nav-text">Year Plan</div>
                </a>
                <a href="#" class="nav-item" data-view="ganttPlanningView">
                    <div class="nav-icon"><i class="fas fa-stream"></i></div>
                    <div class="nav-text">Detailed Planning</div>
                </a>
                <a href="#" class="nav-item" data-view="capacityConfigView">
                    <div class="nav-icon"><i class="fas fa-sliders-h"></i></div>
                    <div class="nav-text">Capacity Tuning</div>
                </a>
                <a href="#" class="nav-item" data-view="sdmForecastingView">
                    <div class="nav-icon"><i class="fas fa-chart-line"></i></div>
                    <div class="nav-text">Resource Forecast</div>
                </a>

                <div class="nav-group-title">Insights</div>
                <a href="#" class="nav-item" data-view="dashboardView">
                    <div class="nav-icon"><i class="fas fa-tachometer-alt"></i></div>
                    <div class="nav-text">Dashboard</div>
                </a>

                <div class="nav-group-title">Configuration</div>
                <a href="#" class="nav-item" data-view="settingsView">
                    <div class="nav-icon"><i class="fas fa-cog"></i></div>
                    <div class="nav-text">Settings</div>
                </a>

                <div class="nav-group-title">Help</div>
                <a href="#" class="nav-item" data-view="helpView">
                    <div class="nav-icon"><i class="fas fa-book"></i></div>
                    <div class="nav-text">How to Guide</div>
                </a>
            </div>
            <!-- 
            HIDDEN: User Profile (Not yet supported)
            TODO: Uncomment and implement when user registration/login is added.
            <div class="user-profile">
                <div class="avatar">U</div>
                <div style="font-size: 0.9rem;">User Profile</div>
            </div> 
            -->
        </div>

        <div id="main-content-wrapper">
            <!-- 1. Canvas Header (Global) -->
            <header id="workspace-header" class="canvas-header">
                <div class="canvas-header__left">
                    <div id="workspace-breadcrumbs" class="canvas-header__breadcrumbs">
                        <!-- Breadcrumbs injected by JS -->
                    </div>
                    <h1 id="workspace-title" class="canvas-header__title">Welcome</h1>
                </div>
                <div class="canvas-header__right">
                    <div id="workspace-actions">
                        <!-- Global Actions injected by JS -->
                    </div>

                    <!-- Notification Dropdown (Existing) -->
                    <div class="notification-wrapper" style="position: relative;">
                        <button id="header-notifications-btn" class="header-btn" title="Notifications">
                            <i class="fas fa-bell"></i>
                            <span id="notification-badge"
                                style="display: none; position: absolute; top: 0; right: 0; width: 8px; height: 8px; background: #ef4444; border-radius: 50%; border: 1px solid white;"></span>
                        </button>
                        <div id="notifications-dropdown" class="dropdown-menu"
                            style="right: 0; left: auto; width: 320px; background: white; border: 1px solid #e2e8f0; color: #1e293b; box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);">
                            <div class="dropdown-header"
                                style="padding: 12px 15px; font-weight: 600; border-bottom: 1px solid #f1f5f9; display: flex; justify-content: space-between; align-items: center;">
                                <span>Notifications</span>
                                <span id="notifications-mark-read"
                                    style="font-size: 0.75rem; color: #64748b; cursor: pointer;">Mark all read</span>
                            </div>
                            <div id="notifications-list" class="dropdown-content"
                                style="max-height: 300px; overflow-y: auto;">
                            </div>
                        </div>
                    </div>

                    <button id="header-ai-btn" class="header-btn" title="AI Assistant"><i
                            class="fas fa-robot"></i></button>
                </div>
            </header>

            <!-- 2. Canvas Toolbar (Optional, Sticky) -->
            <div id="workspace-toolbar" class="canvas-toolbar" style="display: none;">
                <!-- Toolbar content injected by JS -->
            </div>

            <!-- 3. Canvas Content (The View) -->
            <div id="main-content-area" class="canvas-content">


                <div id="welcomeViewContent" class="template-hidden">
                    <div class="welcome-view">
                        <div class="welcome-header">
                            <h1 class="welcome-header__title">Welcome to SMT Platform</h1>
                            <p class="welcome-header__subtitle">
                                Your comprehensive, one-stop shop for Software Managers. Plan roadmaps, visualize
                                architecture, forecast resources, and manage team capacityâ€”all in one unified workspace.
                            </p>
                        </div>

                        <div class="welcome-grid">
                            <!-- Load System Card -->
                            <div class="action-card" onclick="if(window.loadSystem) window.loadSystem()">
                                <div class="action-card__icon-container action-card__icon-container--blue">
                                    <i class="fas fa-folder-open action-card__icon"></i>
                                </div>
                                <h3 class="action-card__title">Load Existing System</h3>
                                <p class="action-card__description">Access your saved architecture plans,
                                    roadmaps, and capacity configurations.</p>
                            </div>

                            <!-- Create System Card -->
                            <div class="action-card" onclick="if(window.createNewSystem) window.createNewSystem()">
                                <div class="action-card__icon-container action-card__icon-container--green">
                                    <i class="fas fa-plus-circle action-card__icon"></i>
                                </div>
                                <h3 class="action-card__title">Create New System</h3>
                                <p class="action-card__description">Start a new project from scratch. Define
                                    teams, services, and strategic goals.</p>
                            </div>

                            <!-- Create with AI Card (Hidden by default) -->
                            <div id="createWithAiCard" class="action-card"
                                onclick="if(window.handleCreateWithAi) window.handleCreateWithAi()"
                                style="display: none;">
                                <div class="action-card__icon-container action-card__icon-container--purple">
                                    <i class="fas fa-magic action-card__icon"></i>
                                </div>
                                <h3 class="action-card__title">Create with AI</h3>
                                <p class="action-card__description">Generate a complete system architecture and
                                    plan using AI assistance.</p>
                            </div>

                            <!-- Documentation Card -->
                            <div class="action-card"
                                onclick="if(window.navigationManager) window.navigationManager.navigateTo('helpView')">
                                <div class="action-card__icon-container action-card__icon-container--gray">
                                    <i class="fas fa-book action-card__icon"></i>
                                </div>
                                <h3 class="action-card__title">Documentation</h3>
                                <p class="action-card__description">Learn how to use the platform, best practices
                                    for modeling, and more.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="aiGenerationStatsModal" class="modal">
                <div class="modal-content-wrapper">
                    <div class="modal-header">
                        <h3>AI Generation Statistics</h3>
                        <span class="close-button" onclick="closeAiStatsModal()">&times;</span>
                    </div>
                    <div class="modal-body">
                        <pre id="aiGenerationStatsContent" class="ai-stats-pre"></pre>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn-primary" onclick="closeAiStatsModal()">Got it</button>
                    </div>
                </div>
            </div>















        </div> <!-- end #main-content-area -->

        <div id="chatResizeHandle" style="display: none;"></div>
        <div id="aiChatPanelContainer"></div>

    </div> <!-- end #main-content-wrapper -->
    </div> <!-- end #app-container -->
    <div id="aiLoadingSpinner" class="spinner-overlay" style="display:none;">
        <div class="spinner"></div>
        <p>AI is generating your system... This may take a moment.</p>
    </div>


    <div id="diagramModal" class="modal">
        <div class="modal-content-wrapper" style="width: 95%; height: 95%; max-width: none;">
            <div class="modal-header">
                <h3 id="diagramModalTitle">Generated Diagram</h3>
                <span class="close-button" onclick="closeDiagramModal()">&times;</span>
            </div>
            <div class="modal-body"
                style="overflow: hidden; background-color: #fff; display: flex; flex-direction: column; padding: 0;">
                <div id="diagramModalContent" class="mermaid"
                    style="flex-grow: 1; overflow: auto; display: flex; justify-content: center; align-items: center;">
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn-secondary" onclick="closeDiagramModal()">Close</button>
            </div>
        </div>
    </div>
    <link rel="stylesheet" href="css/components/roadmapModal.css">
    <link rel="stylesheet" href="css/components/management.css">
    <link rel="stylesheet" href="css/components/notifications.css">

    <!-- Scripts -->
    <!-- Third-party Libraries -->
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10.9.1/dist/mermaid.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/frappe-gantt@0.6.1/dist/frappe-gantt.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.2/dist/chart.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/markdown-it/12.3.2/markdown-it.min.js"></script>
    <script src="https://unpkg.com/markdown-it-anchor@8.6.7/dist/markdownItAnchor.umd.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/luxon/3.4.4/luxon.min.js"></script>
    <script type="text/javascript" src="https://unpkg.com/tabulator-tables@5.5.2/dist/js/tabulator.min.js"></script>
    <script type="text/javascript" src="https://oss.sheetjs.com/sheetjs/xlsx.full.min.js"></script>

    <!-- Application Scripts -->
    <!-- Managers (Load first) -->
    <script src="js/utils/TemplateLoader.js"></script>
    <script src="js/state/AppState.js"></script>
    <script src="js/repositories/SystemRepository.js"></script>
    <script src="js/data.js"></script>
    <script src="js/utils.js"></script>
    <script src="js/managers/NavigationManager.js?v=2"></script>
    <script src="js/managers/NotificationManager.js"></script>
    <script src="js/sampleData/sampleStreamingPlatform.js"></script>
    <script src="js/sampleData/sampleContactCenterPlatform.js"></script>
    <script src="js/sampleData/sampleShopSphere.js"></script>
    <script src="js/sampleData/sampleInsightAI.js"></script>
    <script src="js/sampleData/sampleFinSecure.js"></script>

    <script src="js/components/enhancedTableWidget.js?v=3"></script>
    <script src="js/components/PillNavigationComponent.js"></script>
    <script src="js/documentation.js"></script>
    <script src="js/engines/ForecastingEngine.js"></script>
    <script src="js/components/ResourceForecastView.js"></script>
    <script src="js/mermaidGenerator.js"></script>
    <script src="js/visualizations.js?v=2"></script>
    <script src="js/components/SettingsView.js?v=2"></script>
    <script src="js/components/ServiceEditComponent.js?v=1"></script>
    <script src="js/components/TeamEditComponent.js?v=1"></script>
    <script src="js/components/ThemeEditComponent.js?v=1"></script>
    <script src="js/components/InitiativeEditComponent.js"></script>
    <script src="js/components/GoalEditComponent.js"></script>
    <script src="js/editSystem.js?v=1"></script>
    <script src="js/components/OrgView.js?v=3"></script>
    <script src="js/services/PlanningService.js?v=1"></script>
    <script src="js/yearPlanning.js?v=5"></script>
    <script src="js/components/YearPlanningView.js?v=1"></script>
    <script src="js/engines/CapacityEngine.js"></script>
    <script src="js/components/CapacityConfigurationView.js"></script>
    <script src="js/components/CapacityDashboardView.js"></script>
    <script src="js/components/CapacityPlanningView.js"></script>
    <script src="js/components/BacklogComponent.js"></script>
    <script src="js/components/RoadmapComponent.js"></script>
    <script src="js/components/RoadmapView.js"></script>
    <script src="js/roadmapTableView.js"></script>
    <script src="js/components/widgets/GoalsWidget.js"></script>
    <script src="js/components/widgets/AccomplishmentsWidget.js"></script>
    <script src="js/components/widgets/ImpactWidget.js"></script>
    <script src="js/components/DashboardView.js"></script>
    <script src="js/featureFlags.js"></script>
    <script src="js/components/gantt/GanttRenderer.js"></script>
    <script src="js/components/gantt/MermaidGanttRenderer.js"></script>
    <script src="js/components/gantt/FrappeGanttRenderer.js"></script>
    <script src="js/components/gantt/GanttFactory.js"></script>
    <script src="js/components/gantt/ganttAdapter.js"></script>
    <script src="js/components/gantt/ganttGenerator.js"></script>
    <script src="js/ganttPlanning.js?v=2"></script>
    <script src="ai/aiService.js"></script>
    <script src="ai/aiChatAssistant.js"></script>
    <script src="ai/aiAgentToolset.js"></script>
    <script src="ai/aiPlanOptimizationAgent.js"></script>
    <script src="js/ai/aiViewRegistry.js"></script>
    <script src="ai/aiAgentController.js"></script>

    <script src="js/components/SidebarComponent.js"></script>
    <script src="js/components/HeaderComponent.js"></script>
    <script src="js/components/SystemOverviewView.js"></script>

    <script src="js/components/ManagementView.js"></script>
    <script src="js/components/SystemsView.js"></script>
    <script src="js/components/RoadmapInitiativeModal.js"></script>
    <script src="js/components/WorkspaceComponent.js"></script>
    <script src="js/main.js?v=2"></script>
</body>

</html>